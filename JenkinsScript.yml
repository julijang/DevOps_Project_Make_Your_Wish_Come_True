pipeline {
  agent any
  parameters {
    string(name: 'Month', description: 'Month (integer, no leading zeroes)')

    string(name: 'Day', description: 'Day (integer, no leading zeroes)')
  }
  stages {
    stage ('Initialize') {
      steps {
        script {
          def sMonth = "${Month}"
          def sDay = "${Day}"
          def currentMonth
          int month
          int day
          def monthList = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"] as String[]


          if (sMonth.isInteger() && sDay.isInteger()) { // checks if parameter input is an integer

            // converts string inut to integers
            month = sMonth.toInteger()
            day = sDay.toInteger()

            //checks for valid dates
            if (month < 1 || month > 12) {
              throw new IllegalArgumentException("Month must be between 1 and 12")
            }
            if (day < 1 || day > 31) {
              throw new IllegalArgumentException("Day must be between 1 and 31")
            }


            // selects string output for inputted numerical date
            if (day < 15) {
              currentMonth = monthList[month - 1]
            }
            else {
              if (month == 12) {
                currentMonth = monthList[0]
              }
              else {
                currentMonth = monthList[month]
              }
            }
          }
          else {
            throw new IllegalArgumentException("Month and Day must be integers")
          }

          // switch(month) {
            case 1:
              if(day < 15) {
                currentMonth = "january"
              }
              else {
                currentMonth = "february"
              }
              break;
            case 2:
              if(day < 15) {
                currentMonth = "february"
              }
              else {
                currentMonth = "march"
              }
              break;
            case 3:
              if(day < 15) {
                currentMonth = "march"
              }
              else {
                currentMonth = "april"
              }
              break;
            case 4:
              if(day < 15) {
                currentMonth = "april"
              }
              else {
                currentMonth = "may"
              }
              break;
            case 5:
              if(day < 15) {
                currentMonth = "may"
              }
              else {
                currentMonth = "june"
              }
              break;
            case 6:
                if(day < 15) {
                currentMonth = "june"
              }
              else {
                currentMonth = "july"
              }
              break;
            case 7:
                if(day < 15) {
                currentMonth = "july"
              }
              else {
                currentMonth = "august"
              }
              break;
            case 8:
              if(day < 15) {
                currentMonth = "august"
              }
              else {
                currentMonth = "september"
              }
              break;
            case 9:
              if(day < 15) {
                currentMonth = "september"
              }
              else {
                currentMonth = "october"
              }
              break;
            case 10:
              if(day < 15) {
                currentMonth = "october"
              }
              else {
                currentMonth = "november"
              }
              break;
            case 11:
              if(day < 15) {
                currentMonth = "november"
              }
              else {
                currentMonth = "december"
              }
              break;
            case 12:
              if(day < 15) {
                currentMonth = "december"
              }
              else {
                currentMonth = "january"
              }
              break;
          // }
          echo "${currentMonth}"
        }
      }
    }
    stage('BUILD') {
      steps {
        echo 'Developpement'
      }
    }
    stage('Test') {
      steps {
        echo 'Testing'
      }
    }
    stage('DEPLOY') {
      steps {
        echo 'Mise en Production'
      }
    }
  }
}
